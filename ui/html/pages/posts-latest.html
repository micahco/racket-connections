{{define "title"}}Latest Posts{{end}}

{{define "main"}}
    <h1>
        Latest Posts
    </h1>

    <a href="/posts/new">
        Create new post
    </a>

    {{range $sport := .Data.Sports}}
        {{if $posts := index $.Data.PostsMap $sport.ID}}
            <section>
                <h2>
                    {{$sport.Name}}
                </h2>
                <a href="/posts?sport={{queryEscape $sport.Name}}">
                    All Posts
                </a>
                <ul class="md:flex gap-8 w-full">
                {{range $posts}}
                    <li class="md:w-1/3 md:m-0 max-w-xs mt-4">
                        <a class="block p-4 w-full rounded transition shadow-sm hover:shadow-md hover:no-underline border hover:ring-1 ring-blue-600 border-gray-200 bg-gray-50" href="/posts/{{.ID}}/{{queryEscape .UserName}}">
                            <div class="flex flex-col gap-2">
                                <span class="text-gray-800">{{.UserName}}</span>

                                <span class="text-sm capitalize text-gray-600">
                                    {{.SkillLevel}}
                                </span>
                                
                                <span class="text-sm capitalize self-end text-gray-600">
                                    {{since .CreatedAt}}
                                </span>
                            </div>
                        </a>
                    </li>
                {{end}}
                </ul>
            </section>
        {{end}}
    {{end}}
{{end}}

{{define "scripts"}}{{end}}
