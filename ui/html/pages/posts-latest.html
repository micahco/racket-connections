{{define "title"}}Latest Posts{{end}}

{{define "main"}}
    <section class="flex flex-wrap gap-x-16 gap-y-6 items-center justify-between md:mb-6">
        <h1 class="text-2xl font-bold">
            Latest Posts
        </h1>

        <a class="font-bold py-2 px-4 rounded bg-beaver-orange hover:bg-gray-700 hover:no-underline focus:ring-blue-600 focus:border-blue-600 text-white" href="/posts/new">
            Create new post
        </a>
    </section>

    {{range $s := .Data.Sports}}
        {{if $posts := index $.Data.Map $s.ID}}
            <section class="md:flex md:items-center gap-6 w-full mb-8 md:mb-4">
                <div class="flex justify-between items-end pb-4 pr-8 md:flex-col md:w-32 md:text-right md:pr-0">
                    <h2 class="text-xl capitalize">
                        {{$s.Name}}
                    </h2>
                    <a class="block" href="/posts?sport={{queryEscape $s.Name}}">
                        All Posts
                    </a>
                </div>
                <ul class="md:flex gap-8 w-full">
                {{range $posts}}
                    <li class="md:w-1/3 md:m-0 max-w-xs mt-4">
                        <a class="block p-4 w-full rounded transition shadow-sm hover:shadow-md hover:no-underline border hover:ring-1 ring-blue-600 border-gray-200 bg-gray-50" href="/posts/{{.ID}}/{{queryEscape .UserName}}">
                            <div class="flex flex-col gap-2">
                                <span class="text-gray-800">{{.UserName}}</span>

                                <span class="text-sm text-gray-600">Skill: {{.SkillLevel}}</span>
                                
                                <span class="text-sm capitalize self-end text-gray-600">
                                    {{since .CreatedAt}}
                                </span>
                            </div>
                        </a>
                    </li>
                {{end}}
                </ul>
            </section>
        {{end}}
    {{end}}
{{end}}
